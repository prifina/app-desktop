{"version":3,"sources":["remote-component.config.js","pages/display-app/components.js","RemoteComponent.js","pages/DisplayApp.js"],"names":["module","exports","resolve","react","require","moment","i18n","init","TabText","styled","Text","PageContainer","div","WidgetWrapper","IconDiv","props","open","widgetTheme","EmptyDiv","WidgetContainer","Flex","ModalBackground","SearchContainer","width","left","top","SettingsDiv","BlurImageDiv","DotsContainer","colors","keyframes","Dot","DotLoader","theme","useTheme","console","log","WidgetList","React","memo","widgetList","widgetData","currentUser","dataSources","userDataConnectors","Object","keys","dataConnectors","map","Widget","i","widgetDataSource","size","widget","split","length","userDataSourceStatus","indexOf","status","dataSourceType","sourceType","style","height","margin","backgroundImage","image","bottom","padding","position","textAlign","textStyle","color","title","shortDescription","paddingLeft","display","justifyContent","zIndex","data","settings","currentSettings","SettingsDialog","widgetIndex","widgetSettings","onUpdate","inputFields","useRef","timezones","inputRef","systemFields","useState","fieldInit","setFieldInit","settingsSystemFields","useEffect","forEach","f","current","fieldTypeCheck","s","type","push","tz","names","timezone","text","format","offset","utcOffset","useFormFields","fields","handleChange","tzOffset","value","target","id","m","mt","ml","mr","setting","field","Fragment","placeholder","label","mb","name","defaultValue","onChange","ref","t","ii","onClick","e","hasOwnProperty","SearchBox","forwardRef","showHistory","chevronOpen","searchKey","searchOpen","saveSearchKey","search","searchRef","LeftIcon","iconify","bxSearchAlt2","InputField","autoFocus","__","onKeyDown","key","prevState","RightIcon","bxChevronUp","bxChevronDown","SearchResults","searchBox","roleKey","saveSearchResult","boxRect","getBoundingClientRect","containerProps","content","setContent","useFetch","error","isLoading","setUrl","GOOGLE_URL","SEARCH_ENGINE","encodeURIComponent","API_KEY","items","item","href","link","itemIndex","parseInt","currentTarget","dataset","fontSize","snippet","SearchHistory","searchHistory","requires","createRequires","RemoteComponent","createRemoteComponent","config","appSync","aws_appsync_graphqlEndpoint","main_region","aws_appsync_authenticationType","cognito","USER_POOL_ID","IDENTITY_POOL_ID","APP_CLIENT_ID","S3Config","AWSS3","bucket","S3","region","getSystemSettings","JSON","parse","DisplayApp","widgetConfigData","appSyncClient","prifinaID","usePrifina","check","setSettings","getLocalization","getSettings","getCallbacks","registerClient","Prifina","API","activeRole","WidgetHooks","appId","Amplify","configure","setWidgetList","w","url","widgetConfig","setWidgetConfig","activeTab","setActiveTab","setOpen","flipped","setFlipped","finish","setFinish","imageCache","transform","backgroundColor","background","animationItems","_","index","useSprings","from","opacity","mass","tension","friction","springs","setSprings","refs","settingsRef","appID","installCount","athenaSubscription","a","promises","src","Promise","reject","img","Image","onload","onerror","all","then","cachedImages","GRAPHQL","Storage","subscribe","query","gql","getAthenaResults","variables","next","res","currentAppId","athenaResults","findIndex","widgetInstallCount","c","warn","unsubscribe","widgets","flexDirection","ww","document","querySelectorAll","onRest","to","SpringConfig","molasses","duration","openSettings","className","stringify","systemSettingsUpdated","currentWidgetConfig","k","dataField","newSettings","borderRadius","visibility","backgroundSize","spring","PrifinaLogo","overflow","tab","variant","paddingBottom"],"mappings":"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","file":"static/js/5.90033ba5.chunk.js","sourcesContent":["/**\n * Dependencies for Remote Components\n */\nmodule.exports = {\n  resolve: {\n    react: require(\"react\"),\n    \"styled-components\": require(\"styled-components\"),\n    \"styled-system\": require(\"styled-system\"),\n    \"react-dnd\": require(\"react-dnd\"),\n    \"react-dnd-html5-backend\": require(\"react-dnd-html5-backend\"),\n    \"@prifina/hooks\": require(\"@prifina/hooks\"),\n    moment: require(\"moment\"),\n    \"moment-timezone\": require(\"moment-timezone\"),\n  },\n};\n","/* eslint-disable react/forbid-prop-types */\n/* eslint-disable react/no-multi-comp */\n/* eslint-disable react/display-name */\n\nimport React, { useRef, forwardRef, useEffect, useState } from \"react\";\nimport styled, { keyframes } from \"styled-components\";\n\nimport {\n  Box,\n  Flex,\n  Text,\n  Input,\n  Button,\n  Divider,\n  IconField,\n  Label,\n  Select,\n} from \"@blend-ui/core\";\n//import { useFormFields } from \"../../lib/formFields\";\nimport bxSearchAlt2 from \"@iconify/icons-bx/bx-search-alt-2\";\nimport bxChevronUp from \"@iconify/icons-bx/bx-chevron-up\";\nimport bxChevronDown from \"@iconify/icons-bx/bx-chevron-down\";\n\n//import useFetch from \"../../lib/hooks/useFetch\";\nimport { API_KEY, GOOGLE_URL, SEARCH_ENGINE } from \"../../config\";\n\n//import i18n from \"../../lib/i18n\";\nimport { i18n, useFetch, useFormFields } from \"@prifina-apps/utils\";\nimport moment from \"moment\";\nimport \"moment-timezone\";\nimport PropTypes from \"prop-types\";\n\nimport { useTheme } from \"@blend-ui/core\";\n\ni18n.init();\n\n/*\nposition: absolute;\nwidth: 1309px;\nheight: 716px;\nleft: 64px;\ntop: 182px;\n\nbackground: #FFFFFF;\nbox-shadow: 0px -4px 8px #F5F6F6;\n*/\nexport const TabText = styled(Text)`\n  padding-left: 20px;\n  padding-top: 25px;\n`;\n\nexport const PageContainer = styled.div`\n  margin-left: 64px;\n  margin-right: 64px;\n  margin-top: 24px;\n\n  background: #ffffff;\n  box-shadow: 0px -4px 8px #f5f6f6;\n`;\n\nexport const WidgetWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  border: 2px outset;\n  border-radius: 8px;\n  /*\n  margin: 10px;\n  min-height: 200px;\n  min-width: 200px;\n  */\n`;\n/*\ndiv {\n  width: 100px;\n  height: 100px;\n  background-image: radial-gradient(circle, black 10px, transparent 11px);\n  background-size: 100% 33.33%;\n}\n{\n    height: 20px;\n    width: 30px;\n    position: relative;\n    left: 188px;\n    top: 41px;\n    opacity: 1;\n    cursor: pointer;\n    background-image: radial-gradient(circle,black 2px,transparent 0px);\n    background-size: 100% 33.33%;\n}\n*/\n/*\nexport const IconDiv = styled.div`\n  height: 24px;\n  position: relative;\n  left: 197px;\n  top: 23px;\n  opacity: 0;\n  cursor: ${props => (props.open ? \"default\" : \"pointer\")};\n  &:hover {\n    opacity: ${props => (props.open ? 0 : 1)};\n  }\n`;\n*/\n\nexport const IconDiv = styled.div`\n  &:hover {\n    transform: scale(0.9);\n    box-shadow: 3px 2px 30px 1px rgb(0 0 0 / 24%);\n  }\n  height: 20px;\n  width: 20px;\n  position: relative;\n  left: 290px;\n  top: 20px;\n  opacity: 1;\n  cursor: ${props => (props.open ? \"default\" : \"pointer\")};\n  background-image: radial-gradient(\n    circle,\n    ${props => (props.widgetTheme === \"dark\" ? \"white\" : \"black\")} 2px,\n    transparent 0px\n  );\n  background-size: 100% 33.33%;\n  z-index: 10;\n`;\n\nexport const EmptyDiv = styled.div`\n  height: 20px;\n  width: 20px;\n  position: relative;\n  left: 180px;\n  top: 20px;\n  opacity: 1;\n`;\nexport const WidgetContainer = styled(Flex)`\n  /*\nwidth: 100%;\nheight: 100vh;\ndisplay: flex;\n*/\n  flex-wrap: wrap;\n  flex-direction: row;\n  align-content: flex-start;\n  justify-content: flex-start;\n  position: relative;\n  top: 0px;\n  left: 0px;\n  overflow-y: auto;\n`;\nexport const ModalBackground = styled.div`\n  width: 100%;\n  height: 100vh;\n  z-index: 40;\n  background-color: rgba(30, 29, 29, 0.3);\n  position: absolute;\n  left: 0;\n  top: 0;\n`;\n/*\nexport const SearchModal = styled.div`\nwidth: 100%;\nheight: 100vh;\nz-index: 15;\nbackground-color: rgba(30, 29, 29, 0.3);\nposition: absolute;\nleft: 0;\ntop: 0;\n`;\n*/\nexport const SearchContainer = styled.div`\n  width: ${props => props.width}px;\n  /* height: 100vh; */\n  max-height: 400px;\n  overflow-y: auto;\n  z-index: 20;\n  background-color: white;\n  position: absolute;\n  left: ${props => props.left}px;\n  top: ${props => props.top}px;\n  padding-top: 10px;\n  padding-left: 10px;\n  padding-right: 10px;\n`;\nexport const SettingsDiv = styled.div`\n  background-color: white;\n  width: 100%;\n  height: 100%;\n  /*border: 2px outset; */\n  border-radius: 8px;\n  z-index: 50;\n`;\n\n/*\n.bg-image {\n  \n  background-image: url(\"photographer.jpg\");\n\n  filter: blur(8px);\n  -webkit-filter: blur(8px);\n\n  height: 100%;\n\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n}\n*/\nexport const BlurImageDiv = styled.div`\n  filter: blur(4px);\n  -webkit-filter: blur(4px);\n\n  height: 100%;\n\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n`;\n\nconst dots = colors => keyframes`\n{\n  10% {\n   background-color: ${colors[0]}; \n  }\n  0%, 20%,100% {\n    background-color: ${colors[1]};\n  }\n}\n`;\n\nconst DotsContainer = styled.div`\n  color: ${props => (props.widgetTheme === \"dark\" ? \"white\" : \"black\")};\n  position: absolute;\n  top: 110px;\n  height: 69px;\n  width: 69px;\n  margin: 0 10px 0 0;\n  text-align: left;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 5px solid\n    ${props => (props.widgetTheme === \"dark\" ? \"white\" : \"black\")};\n  border-radius: 50%;\n  z-index: 20;\n  div {\n    animation: ${props =>\n        dots(\n          props.widgetTheme === \"dark\" ? [\"white\", \"gray\"] : [\"black\", \"gray\"],\n        )}\n      4s linear infinite;\n  }\n  div:nth-child(1) {\n    animation-delay: 1s;\n  }\n\n  div:nth-child(2) {\n    animation-delay: 2s;\n  }\n  div:nth-child(3) {\n    animation-delay: 3s;\n  }\n`;\n\nconst Dot = styled.div`\n  position: relative;\n\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background-color: ${props =>\n    props.widgetTheme === \"dark\" ? \"white\" : \"black\"}\n\n  float: left;\n  z-index: 21;\n  margin-right: 9px;\n  &:last-of-type {\n    margin-right: 0;\n  }\n`;\nconst DotLoader = props => {\n  const theme = useTheme();\n  console.log(theme.colors);\n  return (\n    <DotsContainer theme={theme} {...props}>\n      <Dot theme={theme} {...props} />\n      <Dot theme={theme} {...props} />\n      <Dot theme={theme} {...props} />\n    </DotsContainer>\n  );\n};\n\nexport const WidgetList = React.memo(\n  ({ widgetList, widgetData, currentUser, dataSources }) => {\n    // currentUser\n    // localization\n    // settings\n    console.log(\"WIDGET LIST \", widgetList);\n    console.log(\"WIDGET DATA\", widgetData);\n    console.log(\"WIDGET USER\", currentUser);\n    console.log(\"DATASOURCES\", dataSources);\n    const userDataConnectors = Object.keys(currentUser.dataConnectors);\n    //const dataSources = { \"@prifina/google-timeline\": { sourceType: 2 } };\n    return (\n      <>\n        {widgetList.map((Widget, i) => {\n          // only first datasource is used ????\n          const widgetDataSource = widgetData[i].dataConnectors[0];\n          const size = widgetData[i].widget.size.split(\"x\");\n\n          if (widgetData[i].dataConnectors.length > 0) {\n            // data source is not connected....\n            let userDataSourceStatus = 0;\n            if (\n              userDataConnectors.length > 0 &&\n              userDataConnectors.indexOf(widgetDataSource) > -1\n            ) {\n              // check dataSource status\n              userDataSourceStatus =\n                currentUser.dataConnectors[widgetDataSource].status;\n            }\n\n            const dataSourceType = dataSources[widgetDataSource].sourceType;\n            console.log(\"DATASOURCE TYPE\", i, widgetDataSource, dataSourceType);\n            if (userDataSourceStatus < 2) {\n              return (\n                <div\n                  key={\"widget-processing-\" + i}\n                  style={{\n                    width: size[0] + \"px\",\n                    height: size[1] + \"px\",\n                    margin: \"10px\",\n                  }}\n                >\n                  <EmptyDiv />\n                  <WidgetWrapper key={\"widget-wrapper-\" + i}>\n                    <BlurImageDiv\n                      key={\"prifina-widget-\" + i}\n                      style={{\n                        backgroundImage: `url(${widgetData[i].widget.image})`,\n                      }}\n                    />\n\n                    <div\n                      style={{\n                        width: size[0] + \"px\",\n                        bottom: \"60px\",\n                        padding: \"10px\",\n                        position: \"absolute\",\n                        textAlign: \"center\",\n                      }}\n                    >\n                      <Text\n                        textStyle={\"h6\"}\n                        color={\n                          widgetData[i].widget.theme === \"dark\"\n                            ? \"white\"\n                            : \"black\"\n                        }\n                      >\n                        {widgetData[i].widget.title}\n                      </Text>\n                      <Text\n                        textStyle={\"caption\"}\n                        color={\n                          widgetData[i].widget.theme === \"dark\"\n                            ? \"white\"\n                            : \"black\"\n                        }\n                      >\n                        {widgetData[i].widget.shortDescription}\n                      </Text>\n                    </div>\n                    <div\n                      style={{\n                        width: size[0] + \"px\",\n                        bottom: \"15px\",\n                        paddingLeft: \"10px\",\n                        position: \"absolute\",\n                      }}\n                    >\n                      {userDataSourceStatus === 0 && (\n                        <Button>\n                          {dataSourceType === 1 ? \"Connect Data\" : \"Import\"}\n                        </Button>\n                      )}\n                      {userDataSourceStatus === 1 && <Button>Activate</Button>}\n                    </div>\n                  </WidgetWrapper>\n                </div>\n              );\n            }\n\n            // processing\n            if (userDataSourceStatus === 2) {\n              return (\n                <div\n                  key={\"widget-processing-\" + i}\n                  style={{\n                    width: size[0] + \"px\",\n                    height: size[1] + \"px\",\n                    margin: \"10px\",\n                  }}\n                >\n                  <EmptyDiv />\n                  <WidgetWrapper key={\"widget-wrapper-\" + i}>\n                    <BlurImageDiv\n                      key={\"prifina-widget-\" + i}\n                      style={{\n                        backgroundImage: `url(${widgetData[i].widget.image})`,\n                      }}\n                    />\n                    <div\n                      key={\"widget-dot-\" + i}\n                      style={{\n                        width: \"100%\",\n                        height: \"100%\",\n                        display: \"flex\",\n                        justifyContent: \"center\",\n                        top: \"0px\",\n                        zIndex: 19,\n                      }}\n                    >\n                      <DotLoader widgetTheme={widgetData[i].widget.theme} />\n                      <div\n                        style={{\n                          width: size[0] + \"px\",\n                          bottom: \"70px\",\n                          padding: \"5px\",\n                          position: \"absolute\",\n                          textAlign: \"center\",\n                        }}\n                      >\n                        <Text\n                          textStyle={\"h6\"}\n                          color={\n                            widgetData[i].widget.theme === \"dark\"\n                              ? \"white\"\n                              : \"black\"\n                          }\n                        >\n                          Prosessing your data...\n                        </Text>\n                        <Text\n                          textStyle={\"caption\"}\n                          color={\n                            widgetData[i].widget.theme === \"dark\"\n                              ? \"white\"\n                              : \"black\"\n                          }\n                        >\n                          You will be notified as soon as the data becomes\n                          available in your cloud.\n                        </Text>\n                      </div>\n                    </div>\n                  </WidgetWrapper>\n                </div>\n              );\n            }\n          }\n          return (\n            <Widget\n              data={{\n                settings: widgetData[i].currentSettings,\n                currentUser: currentUser,\n              }}\n              key={\"prifina-widget-\" + i}\n            />\n          );\n        })}\n      </>\n    );\n  },\n);\n\nWidgetList.propTypes = {\n  widgetList: PropTypes.array.isRequired,\n  widgetData: PropTypes.array.isRequired,\n  currentUser: PropTypes.object,\n};\n\n//moment.tz.guess()\n//console.log(\"MOMENT \", moment.tz.names());\n/*\n  var select = document.getElementById('timezones');\nmoment.tz.names().forEach(function(timezone){\n\tvar option = document.createElement('option');\n  option.textContent = timezone + ': ' + moment.tz(timezone).format('Z');\n  select.appendChild(option);\n});\n*/\n/*\nmoment.tz.names().forEach(function (timezone) {\n  //console.log(moment.tz(timezone).utcOffset());\n});\n*/\n//console.log(moment.tz.names());\n/*\n<Label htmlFor=\"cabinClass\">Cabin Class</Label>\n<Select\n  id=\"cabinClass\"\n  name=\"cabinClass\"\n  defaultValue=\"Premium Economy\"\n  onChange={changeAction}\n>\n  <option>Economy</option>\n  <option>Premium Economy</option>\n  <option>Business</option>\n  <option>First Class</option>\n  <option>\n    With a super long label that doesn't get clobbered by the chevron\n  </option>\n</Select>\n*/\n\nexport const SettingsDialog = ({\n  widgetIndex,\n  widgetSettings,\n  onUpdate,\n  ...props\n}) => {\n  //const currentSettings = widgetSettings[widget];\n  console.log(\"SETTINGS \", widgetIndex, widgetSettings);\n  let inputFields = useRef({});\n  let timezones = useRef([]);\n  const inputRef = useRef();\n  const systemFields = useRef({});\n  const [fieldInit, setFieldInit] = useState(false);\n  // note size.... not sizes\n  const settingsSystemFields = [\"theme\", \"size\"];\n  useEffect(() => {\n    Object.keys(widgetSettings.currentSettings).forEach(f => {\n      if (settingsSystemFields.indexOf(f) > -1) {\n        if (f === \"size\") {\n          systemFields.current[\"sizes\"] = widgetSettings.currentSettings[f];\n        } else {\n          systemFields.current[f] = widgetSettings.currentSettings[f];\n        }\n      } else {\n        inputFields.current[f] = widgetSettings.currentSettings[f];\n      }\n    });\n    console.log(\"FLDS \", inputFields, systemFields);\n    console.log(\"DIALOG \", props);\n    let fieldTypeCheck = [];\n    widgetSettings.settings.forEach(s => {\n      console.log(s);\n      if (fieldTypeCheck.indexOf(s.type) === -1) fieldTypeCheck.push(s.type);\n    });\n    //console.log(fieldTypeCheck);\n\n    // have timezone field type...\n    if (fieldTypeCheck.indexOf(\"TZ\") > -1) {\n      moment.tz.names().forEach(function (timezone) {\n        timezones.current.push({\n          text: timezone + \": \" + moment.tz(timezone).format(\"Z\"),\n          tz: timezone,\n          offset: moment.tz(timezone).utcOffset(),\n        });\n      });\n    }\n    setFieldInit(true);\n  }, []);\n  //console.log(timezones);\n\n  // 1== widget settings, 2== system settings like theme,size...\n  const settingsType = 1;\n\n  const [fields, handleChange] = useFormFields(\n    settingsType === 1 ? inputFields.current : systemFields.current,\n  );\n\n  console.log(\"RENDER FIELDS \", fields, inputFields);\n\n  if (timezones.current.length > 0) {\n    const tzOffset = moment.tz(fields.tz).utcOffset();\n    console.log(\"TZ \", inputFields, tzOffset);\n    if (tzOffset !== inputFields.current.offset) {\n      inputFields.current.offset = tzOffset;\n      inputFields.current.tz = fields.tz;\n      console.log(\"INPUT \", inputRef);\n      if (inputRef.current) {\n        inputRef.current.value = tzOffset;\n      }\n\n      handleChange({\n        target: {\n          id: \"offset\",\n          value: tzOffset,\n        },\n      });\n    }\n  }\n\n  return (\n    <Box m={2}>\n      <Text textStyle={\"h3\"} textAlign={\"center\"} mt={10}>\n        {widgetSettings.title}\n      </Text>\n      <Divider />\n      {fieldInit && (\n        <Box mt={10} ml={5} mr={5}>\n          {widgetSettings.settings.map((setting, i) => {\n            if (\n              settingsType === 1 &&\n              Object.keys(inputFields.current).indexOf(setting.field) > -1\n            ) {\n              return (\n                <React.Fragment key={\"settings-\" + i}>\n                  {setting.type === \"text\" && (\n                    <Input\n                      mt={15}\n                      key={\"widget-setting-\" + i}\n                      placeholder={setting.label}\n                      mb={2}\n                      id={setting.field}\n                      name={setting.field}\n                      defaultValue={fields[setting.field]}\n                      onChange={handleChange}\n                      ref={inputRef}\n                    />\n                  )}\n                  {setting.type === \"TZ\" && (\n                    <>\n                      <Label key={\"setting-label-\" + i} mt={10}>\n                        {setting.label}\n                      </Label>\n                      <Select\n                        mb={10}\n                        size={\"sm\"}\n                        key={\"widget-setting-\" + i}\n                        id={setting.field}\n                        name={setting.field}\n                        defaultValue={fields[setting.value]}\n                        onChange={handleChange}\n                      >\n                        {timezones.current.map((t, ii) => {\n                          return (\n                            <option\n                              key={\"widget-setting-\" + i + \"-\" + ii}\n                              value={t.tz}\n                            >\n                              {t.text}\n                            </option>\n                          );\n                        })}\n                      </Select>\n                    </>\n                  )}\n                </React.Fragment>\n              );\n            }\n            if (\n              settingsType === 2 &&\n              Object.keys(systemFields.current).indexOf(setting.field) > -1\n            ) {\n              let defaultValue = \"\";\n              let selectOptions = [];\n              let currentField = setting.field;\n\n              if (setting.type === \"select\" && setting.field === \"theme\") {\n                selectOptions = JSON.parse(setting.value);\n                //selectOptions.push({ option: \"Dark\", value: \"dark\" });\n                defaultValue = systemFields.current[currentField];\n              }\n\n              if (setting.type === \"select\" && setting.field === \"sizes\") {\n                selectOptions = JSON.parse(setting.value);\n                selectOptions.push({ option: \"600x600\", value: \"600x600\" });\n                //\"[{\\\"option\\\":\\\"300x300\\\",\\\"value\\\":\\\"300x300\\\"}]\"\n                defaultValue = systemFields.current[currentField];\n              }\n              return (\n                <React.Fragment key={\"settings-\" + i}>\n                  {setting.type === \"text\" && (\n                    <Input\n                      mt={15}\n                      key={\"widget-setting-\" + i}\n                      placeholder={setting.label}\n                      mb={2}\n                      id={currentField}\n                      name={currentField}\n                      defaultValue={fields[currentField]}\n                      onChange={handleChange}\n                      ref={inputRef}\n                    />\n                  )}\n                  {setting.type === \"select\" && (\n                    <>\n                      <Label key={\"setting-label-\" + i} mt={10}>\n                        {setting.label}\n                      </Label>\n                      <Select\n                        mb={10}\n                        size={\"sm\"}\n                        key={\"widget-setting-\" + i}\n                        id={currentField}\n                        name={currentField}\n                        defaultValue={defaultValue}\n                        onChange={handleChange}\n                      >\n                        {selectOptions.map((t, ii) => {\n                          return (\n                            <option\n                              key={\"widget-setting-\" + i + \"-\" + ii}\n                              value={t.value}\n                            >\n                              {t.option}\n                            </option>\n                          );\n                        })}\n                      </Select>\n                    </>\n                  )}\n                </React.Fragment>\n              );\n            }\n          })}\n          <Box mt={10}>\n            <Button\n              width={\"100%\"}\n              onClick={e => {\n                console.log(\"UPDATE BUTTON \", fields);\n                //console.log(fields);\n\n                if (timezones.length > 0 && fields.hasOwnProperty(\"tz\")) {\n                  onUpdate({\n                    tz: fields.tz,\n                    offset: moment.tz(fields.tz).utcOffset(),\n                  });\n                } else {\n                  onUpdate(fields);\n                }\n\n                //console.log(\"UPDATE CLICK \", e.target.className);\n                //onUpdate(fields);\n              }}\n            >\n              Update\n            </Button>\n          </Box>\n        </Box>\n      )}\n    </Box>\n  );\n};\n\nSettingsDialog.propTypes = {\n  widgetIndex: PropTypes.number.isRequired,\n  widgetSettings: PropTypes.object.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n};\n\nexport const SearchBox = forwardRef(\n  ({ showHistory, chevronOpen, searchKey, searchOpen, saveSearchKey }, ref) => {\n    const [fields, handleChange] = useFormFields({\n      search: \"\",\n    });\n    const searchRef = useRef();\n    return (\n      <Box ml={10} mr={10} ref={ref}>\n        <IconField>\n          <IconField.LeftIcon\n            iconify={bxSearchAlt2}\n            color={\"componentPrimary\"}\n            size={\"17\"}\n          />\n          <IconField.InputField\n            ref={searchRef}\n            autoFocus={true}\n            placeholder={i18n.__(\"Search\")}\n            id={\"search\"}\n            name={\"search\"}\n            onChange={handleChange}\n            onKeyDown={e => {\n              if (e.key === \"Enter\") {\n                //console.log(\"SEARCH ....\", fields.search);\n                saveSearchKey(fields.search);\n                searchKey(fields.search);\n              }\n            }}\n          />\n          <Box\n            display={\"inline-flex\"}\n            onClick={() => {\n              if (!searchOpen) {\n                showHistory(prevState => !prevState);\n              }\n              searchRef.current.value = \"\";\n              searchKey(\"\");\n            }}\n          >\n            <IconField.RightIcon\n              iconify={chevronOpen || searchOpen ? bxChevronUp : bxChevronDown}\n              color={\"componentPrimary\"}\n              size={\"17\"}\n            />\n          </Box>\n        </IconField>\n      </Box>\n    );\n  },\n);\nSearchBox.propTypes = {\n  showHistory: PropTypes.func.isRequired,\n  chevronOpen: PropTypes.bool.isRequired,\n  searchKey: PropTypes.func.isRequired,\n  searchOpen: PropTypes.bool,\n  saveSearchKey: PropTypes.func.isRequired,\n};\n\nexport const SearchResults = props => {\n  const { searchBox, searchKey, roleKey, saveSearchResult } = props;\n  //console.log(searchBox);\n  //console.log(searchBox.current.getBoundingClientRect());\n  const boxRect = searchBox.current.getBoundingClientRect();\n  const containerProps = {\n    width: boxRect.width,\n    left: boxRect.left,\n    top: boxRect.top + boxRect.height + 5,\n  };\n  console.log(containerProps);\n\n  console.log(\"NEW SEARCH \", searchKey);\n  const [content, setContent] = useState(null);\n  const { data, error, isLoading, setUrl } = useFetch();\n  /*\n  setUrl(\n    `${GOOGLE_URL}?cx=${SEARCH_ENGINE}&exactTerms=${\n      roleKey.length > 0 ? encodeURIComponent(roleKey) : \"\"\n    }&q=${encodeURIComponent(searchKey)}&lr=lang_en&key=${API_KEY}`,\n  );\n*/\n  //let searchHistory = [];\n  /*\n  let searchHistory = JSON.parse(localStorage.getItem(\"searchHistory\"));\n  if (searchHistory === null) {\n    searchHistory = [];\n  } else {\n    searchHistory.unshift({ search: searchKey });\n  }\n  localStorage.setItem(\"searchHistory\", JSON.stringify(searchHistory));\n*/\n  useEffect(() => {\n    if (!isLoading)\n      setUrl(\n        `${GOOGLE_URL}?cx=${SEARCH_ENGINE}&exactTerms=${\n          roleKey.length > 0 ? encodeURIComponent(roleKey) : \"\"\n        }&q=${encodeURIComponent(searchKey)}&lr=lang_en&key=${API_KEY}`,\n      );\n    if (error) setContent(<h2>Error when fetching: {error}</h2>);\n    if (!data && isLoading) setContent(<h2>LOADING...</h2>);\n    if (!data && !isLoading) setContent(null);\n    if (data) {\n      //console.log(Object.keys(data));\n      console.log(data);\n      const items = data.items.map((item, i) => {\n        return (\n          <li key={\"search-result-\" + i}>\n            <div>\n              <a\n                href={item.link}\n                data-link={i}\n                onClick={e => {\n                  const itemIndex = parseInt(e.currentTarget.dataset[\"link\"]);\n                  console.log(\"LINK CLICK \", data.items[itemIndex]);\n                  saveSearchResult(searchKey, data.items[itemIndex]);\n                }}\n                target={\"_blank\"}\n              >\n                {item.title}\n              </a>\n            </div>\n            <div style={{ fontSize: \"0.75rem\" }}>{item.snippet}</div>\n          </li>\n        );\n      });\n      setContent(<ol>{items}</ol>);\n    }\n  }, [searchKey, error, isLoading, data]);\n  /*\n  const getContent = newSearch => {\n    if (error) return <h2>Error when fetching: {error}</h2>;\n    if (!data && isLoading) return <h2>LOADING...</h2>;\n    if (!data) return null;\n    console.log(Object.keys(data));\n    console.log(data);\n    console.log(\"NEW SEARCH2 \", searchKey);\n    console.log(\"NEW SEARCH3 \", newSearch);\n    console.log(\"NEW SEARCH4 \", prevSearchKey);\n\n    prevSearchKey.current = newSearch;\n    return (\n      <ol>\n        {data.items.map((item, i) => {\n          return (\n            <li key={\"search-result-\" + i}>\n              <div>\n                <a href={item.link} target={\"_blank\"}>\n                  {item.title}\n                </a>\n              </div>\n              <div style={{ fontSize: \"0.75rem\" }}>{item.snippet}</div>\n            </li>\n          );\n        })}\n      </ol>\n    );\n  };\n*/\n\n  return (\n    <>\n      <SearchContainer {...containerProps}>\n        <Text textStyle={\"h4\"}>Search results</Text>\n        <Divider />\n        {content}\n      </SearchContainer>\n    </>\n  );\n};\nSearchResults.propTypes = {\n  searchBox: PropTypes.object.isRequired,\n  searchKey: PropTypes.string,\n  roleKey: PropTypes.string,\n  saveSearchResult: PropTypes.func.isRequired,\n};\n\nexport const SearchHistory = props => {\n  const { searchBox } = props;\n  console.log(\"HISTORY \", searchBox);\n  //console.log(searchBox.current.getBoundingClientRect());\n  const boxRect = searchBox.current.getBoundingClientRect();\n  const containerProps = {\n    width: boxRect.width,\n    left: boxRect.left,\n    top: boxRect.top + boxRect.height + 5,\n  };\n  console.log(containerProps);\n  let searchHistory = [];\n  /*\n  let searchHistory = JSON.parse(localStorage.getItem(\"searchHistory\"));\n  if (searchHistory === null) {\n    searchHistory = [{ search: \"Testing...\" }];\n  }\n*/\n  /*\n    localStorage.setItem(\n      \"WidgetImage\",\n      JSON.stringify({ image: res.target.result })\n    );\n    */\n\n  return (\n    <>\n      <SearchContainer {...containerProps}>\n        <Text textStyle={\"h4\"}>Search history</Text>\n        <Divider />\n        <ol>\n          {searchHistory.length > 0 &&\n            searchHistory.map((item, i) => {\n              return <li key={\"search-\" + i}>{item.search}</li>;\n            })}\n        </ol>\n      </SearchContainer>\n    </>\n  );\n};\n\nSearchHistory.propTypes = {\n  searchBox: PropTypes.object.isRequired,\n};\n","import {\n  createRequires,\n  createRemoteComponent,\n} from \"@paciolan/remote-component\";\n\nimport { resolve } from \"./remote-component.config.js\";\n\nconst requires = createRequires(resolve);\n\nexport const RemoteComponent = createRemoteComponent({ requires });\n","/* eslint-disable react/forbid-prop-types */\n/* eslint-disable react/display-name */\n/* eslint-disable react/no-multi-comp */\n\nimport React, { useRef, useState, useEffect, forwardRef } from \"react\";\nimport { usePrifina } from \"@prifina/hooks\";\nimport { BlendIcon } from \"@blend-ui/icons\";\nimport bxCog from \"@iconify/icons-bx/bx-cog\";\n\n//import html2canvas from \"html2canvas\";\n//import ReactDOM from \"react-dom\";\nimport {\n  useSpring,\n  useSprings,\n  animated,\n  config as SpringConfig,\n} from \"@react-spring/web\";\n\nimport { RemoteComponent } from \"../RemoteComponent\";\nimport { Tabs, Tab, TabList, TabPanel, TabPanelList } from \"@blend-ui/tabs\";\n//import i18n from \"../lib/i18n\";\n\n//import widgetData from \"./widgetData\";\n//import installedWidgets from \"./installedWidgets\";\n\nimport Amplify, { API as GRAPHQL, Storage } from \"aws-amplify\";\nimport config from \"../config\";\n\nimport gql from \"graphql-tag\";\n\nimport * as C from \"./display-app/components\";\n\n//import { addSearchResultMutation, addSearchKeyMutation } from \"../graphql/api\";\n/*\nimport { addSearchResult, addSearchKey } from \"../graphql/mutations\";\n*/\nimport {\n  addSearchResult,\n  addSearchKey,\n  i18n,\n  getAthenaResults,\n} from \"@prifina-apps/utils\";\n\nimport { PrifinaLogo } from \"../components/PrifinaLogo\";\nimport PropTypes from \"prop-types\";\nimport { system } from \"styled-system\";\n\nimport { Box, Flex } from \"@blend-ui/core\";\nconst short = require(\"short-uuid\");\ni18n.init();\n\nconst APIConfig = {\n  aws_appsync_graphqlEndpoint: config.appSync.aws_appsync_graphqlEndpoint,\n  aws_appsync_region: config.main_region,\n  aws_appsync_authenticationType: config.appSync.aws_appsync_authenticationType,\n};\n\nconst AUTHConfig = {\n  // To get the aws credentials, you need to configure\n  // the Auth module with your Cognito Federated Identity Pool\n  mandatorySignIn: false,\n  userPoolId: config.cognito.USER_POOL_ID,\n  identityPoolId: config.cognito.IDENTITY_POOL_ID,\n  userPoolWebClientId: config.cognito.APP_CLIENT_ID,\n  region: config.main_region,\n};\n\nconst S3Config = {\n  AWSS3: {\n    bucket: config.S3.bucket, //REQUIRED -  Amazon S3 bucket name\n    region: config.S3.region, //OPTIONAL -  Amazon service region\n  },\n};\n\nconst fn = animations => index => animations[index];\n\nfunction getSystemSettings(settings, currentSettings) {\n  console.log(\"getSystemSettings \", settings, currentSettings);\n  // default values.... should not be needed, if all is configured correctly.\n  let theme = \"dark\";\n  let size = \"300x300\";\n\n  if (settings && settings.length > 0) {\n    settings.forEach(s => {\n      if (s.field === \"sizes\") {\n        size = currentSettings[s.field] || JSON.parse(s.value)[0].value;\n        //\"[{\\\"option\\\":\\\"300x300\\\",\\\"value\\\":\\\"300x300\\\"}]\"\n      }\n      if (s.field === \"theme\") {\n        theme = currentSettings[s.field] || JSON.parse(s.value)[0].value;\n      }\n    });\n  }\n  return { theme: theme, size: size };\n}\nconst DisplayApp = ({\n  widgetConfigData,\n  appSyncClient,\n  prifinaID,\n  dataSources,\n}) => {\n  console.log(\"PROPS \", widgetConfigData, Object.keys(widgetConfigData));\n  console.log(\"DISPLAY APP \", prifinaID);\n  const {\n    check,\n    currentUser,\n    getLocalization,\n    getSettings,\n    setSettings,\n    getCallbacks,\n    registerClient,\n    API,\n    Prifina,\n    activeRole,\n  } = usePrifina();\n\n  console.log(\"DISPLAY APP \", currentUser);\n  console.log(\"DISPLAY APP DATASOURCES\", dataSources);\n  const WidgetHooks = new Prifina({ appId: \"WIDGETS\" });\n  //console.log(check());\n  Amplify.configure(S3Config);\n\n  const [widgetList, setWidgetList] = useState([]);\n  const [widgetConfig, setWidgetConfig] = useState(\n    widgetConfigData.map((w, i) => {\n      //parse theme and sizes....\n      const { theme, size } = getSystemSettings(\n        w.widget.settings,\n        w.currentSettings,\n      );\n      return {\n        dataConnectors: w.dataConnectors,\n        currentSettings: w.currentSettings,\n        url: w.url,\n        settings: w.settings,\n        widget: { theme: theme, size: size, ...w.widget },\n      };\n    }),\n  );\n\n  const [activeTab, setActiveTab] = useState(0);\n\n  const [searchHistory, setSearchHistory] = useState(false);\n  const searchBox = useRef();\n  const [searchKey, setSearchKey] = useState(\"\");\n\n  const [open, setOpen] = useState(false);\n  const [flipped, setFlipped] = useState(false);\n  const [finish, setFinish] = useState(false);\n  //const [imagesReady, setImagesReady] = useState(false);\n  //const widgetImage = useRef();\n  const imageCache = useRef([]);\n\n  const settings = useRef({\n    left: \"0px\",\n    top: \"0px\",\n    height: \"0px\",\n    width: \"0px\",\n    widget: -1,\n  });\n\n  /*\n  const images = [\n    \"https://prifina-apps-352681697435.s3.amazonaws.com/fNBCsuKbikFG7VahRjRNaN/assets/Clock.png\",\n    \"https://prifina-apps-352681697435.s3.amazonaws.com/fNBCsuKbikFG7VahRjRNaN/assets/Sunny.png\",\n  ];\n*/\n  //const items = [{}, {}];\n  const items = [\n    {\n      //transform: `perspective(1000px) rotateY(360deg)`,  // right-to-left\n      transform: `perspective(1000px) rotateY(0deg)`,\n      backgroundColor: `currentColor`,\n      background: null,\n      /* \"https://prifina-apps-352681697435.s3.amazonaws.com/fNBCsuKbikFG7VahRjRNaN/assets/Sunny.png\", */\n    },\n    {\n      transform: null,\n      background: \"\",\n      backgroundColor: `white`,\n    },\n  ];\n  const animationItems = useRef(items.map((_, index) => index));\n  console.log(\"ITEMS \", animationItems);\n  const [springs, setSprings] = useSprings(items.length, index => {\n    return {\n      from: {\n        transform: items[index].transform,\n        opacity: 1,\n        width: \"300px\",\n        height: \"300px\",\n      },\n      config: {\n        mass: 5,\n        tension: 400,\n        friction: 150,\n      },\n    };\n  });\n\n  /*\n  const [springs, setSprings] = useSprings(items.length, index => ({\n    from: {\n      transform: items[index].transform,\n      opacity: 1,\n    },\n    config: {\n      mass: 5,\n      tension: 500,\n      friction: 220,\n    },\n  }));\n  */\n  /*\n  const { transform } = useSpring({\n    transform: `perspective(600px) rotateX(${open ? 180 : 0}deg)`,\n    config: { mass: 5, tension: 500, friction: 180 },\n  });\n*/\n  console.log(\"SPRINGS \", springs);\n  const refs = useRef([]);\n  const settingsRef = useRef([]);\n  const widgetSettings = useRef(\n    widgetConfigData.map((w, i) => {\n      //parse theme and sizes....\n      const { theme, size } = getSystemSettings(\n        w.widget.settings,\n        w.currentSettings,\n      );\n\n      return {\n        theme: theme,\n        size: size,\n        settings: w.widget.settings || [],\n        title: w.widget.title,\n        appId: w.widget.appID,\n        installCount: w.widget.installCount,\n        currentSettings: w.currentSettings,\n        image: w.widget.image,\n        dataConnectors: w.dataConnectors,\n      };\n    }),\n  );\n  console.log(\"WIDGET SETTINGS after parsing theme&sizes \", widgetSettings);\n  const roleKeys = [\"\", \"work\", \"family\", \"hobbies\"];\n\n  const athenaSubscription = useRef(null);\n\n  const tabClick = (e, tab) => {\n    console.log(\"Click\", e);\n    console.log(\"TAB\", tab);\n    setActiveTab(tab);\n  };\n\n  useEffect(async () => {\n    // browser cache images....\n    const promises = widgetConfigData.map(src => {\n      return new Promise(function (resolve, reject) {\n        const img = new Image();\n        img.src = src.widget.image;\n        img.onload = resolve(img);\n        img.onerror = reject();\n        imageCache.current.push(src.widget.image);\n      });\n    });\n    await Promise.all(promises).then(cachedImages => {\n      console.log(\"Images loaded....\", cachedImages);\n      //imageCache.current = cachedImages;\n      //setImagesReady(true);\n    });\n  }, []);\n\n  const takeSnapshot = async w => {\n    const DEFAULT_PNG = {\n      fileName: \"component.png\",\n      type: \"image/png\",\n      html2CanvasOptions: {},\n    };\n    if (w !== -1) {\n      /*\n      const ww = document.querySelectorAll(\n        \"[data-widget-index='\" + w + \"']\",\n      )[0];\n\n      const element = ReactDOM.findDOMNode(ww);\n      const canvas = await html2canvas(element, {\n        scrollY: -window.scrollY,\n        useCORS: true,\n        //backgroundColor: null,\n        ...DEFAULT_PNG,\n      });\n      const f = canvas.toDataURL(DEFAULT_PNG.type, 1.0);\n      //console.log(\"FILE2 \", f);\n      console.log(\"NEW SNAPSHOT TAKEN...\");\n      */\n      //widgetImage.current = f;\n      //widgetImage.current = \"https://via.placeholder.com/400\";\n      //setOpen(true);\n      //setWidgetImage(f);\n    }\n  };\n  const openSettings = w => {\n    if (!open) {\n      console.log(\"CLICK...\", w);\n      //console.log(\"REFS...\", refs.current[0].getBoundingClientRect());\n      //const ww = refs.current[w].getBoundingClientRect();\n      //console.log(document.querySelectorAll(\"[data-widget-index='\" + w + \"']\"));\n\n      const ww = document\n        .querySelectorAll(\"[data-widget-index='\" + w + \"']\")[0]\n        .getBoundingClientRect();\n      // const element = ReactDOM.findDOMNode(refs.current[settings.widget]);\n      //const ww = { left: 0, top: 0, height: 0, width: 0 };\n      console.log(\"WW...\", ww);\n\n      settings.current = {\n        left: ww.left + \"px\",\n        top: ww.top + \"px\",\n        height: ww.height + \"px\",\n        width: ww.width + \"px\",\n        widget: w,\n      };\n      /*\n      animationItems.current = [\n        {\n          opacity: 1,\n          transform: `perspective(1000px) rotateX(${open ? 180 : 0}deg)`,\n          //transform: `perspective(1000px) rotateY(180deg)`,\n          height: ww.height + \"px\",\n          width: ww.width + \"px\",\n          visibility: \"visible\",\n          //reset: true,\n          config: {\n            mass: 5,\n            tension: 500,\n            friction: 220,\n          },\n        },\n        \n        {\n          delay: 500,\n          reset: true,\n          from: {\n            transform: \"none\",\n            width: ww.width + \"px\",\n            height: ww.height + \"px\",\n            visibility: \"hidden\",\n          },\n          to: {\n            transform: \"none\",\n            width: \"400px\",\n            height: \"400px\",\n            visibility: \"hidden\",\n          },\n        },\n        \n      ];\n*/\n      //setSprings(fn(animationItems.current));\n\n      //takeSnapshot(w);\n\n      setSprings(index => {\n        if (index === 0) {\n          return {\n            //transform: `perspective(1000px) rotateY(180deg)`, right-toleft\n\n            transform: `perspective(1000px) rotateY(150deg)`,\n            onRest: () => {\n              setFlipped(true);\n              setFinish(true);\n            },\n          };\n        }\n\n        return {\n          transform: null,\n\n          opacity: 0,\n          from: {\n            width: \"300px\",\n            height: \"300px\",\n          },\n          to: {\n            width: \"400px\",\n            height: \"400px\",\n          },\n          config: { ...SpringConfig.molasses, duration: 3500 },\n          onRest: () => {\n            //setFinish(true);\n          },\n        };\n      });\n\n      setOpen(true);\n    }\n  };\n\n  useEffect(() => {\n    let ignore = false;\n    console.log(\"OPEN CHANGE \", open);\n    if (false) {\n      //if (open) {\n      //console.log(\"REFS....\", document.querySelectorAll(\".prifina-widget[data-widget-index='0']\"));\n      //console.log(\"REFS....\", document.querySelectorAll(\".prifina-widget\"));\n      /*\n      animationItems.current = [\n        {\n          opacity: 1,\n          transform: `perspective(1000px) rotateY(180deg)`,\n          width: settings.current.width,\n          height: settings.current.height,\n          visibility: \"visible\",\n          config: { mass: 5, tension: 500, friction: 80 },\n          reset: true,\n          onStart: () => {\n            // hide widget...\n            //refs.current[settings.widget].style.visibility = \"hidden\";\n          },\n        },\n        {\n          delay: 500,\n          reset: true,\n          from: {\n            transform: \"none\",\n            width: settings.current.width,\n            height: settings.current.height,\n            visibility: \"visible\",\n          },\n          to: {\n            transform: \"none\",\n            width: \"400px\",\n            height: \"400px\",\n            visibility: \"visible\",\n          },\n          onStart: () => {\n            if (settingsRef.current[0]) {\n              //console.log(\"ENDS...\", settingsRef.current[0]);\n              setFlipped(true);\n              //settingsRef.current[0].style.display = \"none\";\n            }\n          },\n          onRest: () => {\n            if (settingsRef.current[1]) {\n              //console.log(\"ENDS...\", settingsRef.current[1]);\n              // settingsRef.current[0].style.visibility = \"hidden\";\n            }\n          },\n        },\n      ];\n*/\n      //setSprings(fn(animationItems.current));\n    } else {\n      if (settings.current.widget != -1) {\n        console.log(\"INIT SPRINGS....\");\n\n        settingsRef.current = [];\n        if (flipped && finish) {\n          setSprings(index => {\n            return {\n              from: {\n                transform: items[index].transform,\n                opacity: 1,\n                width: \"300px\",\n                height: \"300px\",\n              },\n              config: {\n                mass: 5,\n                tension: 500,\n                friction: 220,\n              },\n            };\n          });\n        }\n\n        setFlipped(false);\n        setFinish(false);\n      }\n    }\n    return () => {\n      ignore = true;\n    };\n  }, [open]);\n\n  useEffect(() => {\n    registerClient([appSyncClient, GRAPHQL, Storage]);\n\n    athenaSubscription.current = appSyncClient\n      .subscribe({ query: gql(getAthenaResults), variables: { id: prifinaID } })\n      .subscribe({\n        next: res => {\n          console.log(\"ATHENA SUBS RESULTS \", res);\n          /*\n          data:\n          athenaResults:\n          appId: \"866fscSq5Ae7bPgUtb6ffB\"\n          content:\n          id\n          */\n          const currentAppId = res.data.athenaResults.appId;\n          console.log(currentAppId, widgetSettings.current);\n          const widgetIndex = widgetSettings.current.findIndex(\n            w => w.appId === currentAppId,\n          );\n          const widgetInstallCount =\n            widgetSettings.current[widgetIndex].installCount;\n\n          console.log(widgetIndex, widgetInstallCount);\n          const c = getCallbacks();\n          console.log(\"CALLBACKS \", c);\n\n          if (\n            c.hasOwnProperty(currentAppId) &&\n            typeof c[currentAppId][widgetInstallCount] === \"function\"\n          ) {\n            console.log(\"FOUND CALLBACK \");\n            c[currentAppId][widgetInstallCount]({\n              data: JSON.parse(res.data.athenaResults.data).content,\n            });\n          }\n        },\n        error: error => {\n          console.log(\"ATHENA SUBS ERROR \");\n          console.warn(error);\n        },\n      });\n\n    /*\n    let data = installedWidgets.map(w => {\n      return {\n        url: widgetData[w].url,\n        settings: widgetData[w].settings.length > 0,\n        currentSetting: {},\n      };\n    });\n*/\n    console.log(\"WIDGET CONFIG \", widgetConfig);\n    /*\n    //await getSettings(appID, \"f902cbca-8748-437d-a7bb-bd2dc9d25be5\")\n    let allSettings = [];\n    getSettings(\"\", \"f902cbca-8748-437d-a7bb-bd2dc9d25be5\").then(res => {\n      //console.log(\"SETTINGS \", res);\n      const widgets = JSON.parse(res.data.getInstalledWidgets.installedWidgets);\n      console.log(\"INSTALLED \", widgets);\n      widgetSettings.current = widgetConfig.map((w, i) => {\n        let defaultValues = {};\n        if (w.settings) {\n          w.widget.settings.forEach(v => {\n            // if type=text...\n            defaultValues[v.value] = \"\";\n          });\n          if (widgets.hasOwnProperty(w.widget.appID)) {\n            //console.log(\"SEETINGS FOUND \", w.widget.appID);\n            widgets[w.widget.appID].forEach(w => {\n              if (defaultValues.hasOwnProperty(w.field)) {\n                defaultValues[w.field] = w.value;\n              }\n            });\n          }\n        }\n        widgetConfig[i].currentSetting = defaultValues;\n        return {\n          settings: w.widget.settings || [],\n          title: w.widget.title,\n          appId: w.widget.appID,\n          currentSetting: defaultValues,\n        };\n      });\n\n      console.log(\"WIDGET CONFIG 2\", widgetConfig);\n    });\n    */\n    /*\n    widgetSettings.current = widgetConfig.map((w, i) => {\n      let defaultValues = {};\n      console.log(\"WIDGET SETTINGS \", w);\n      if (w.settings) {\n        w.widget.settings.forEach(v => {\n          // if type=text...\n          defaultValues[v.value] = \"\";\n        });\n        allSettings.push(getSettings(w));\n      } else {\n        allSettings.push(Promise.resolve({}));\n      }\n\n      return {\n        settings: w.widget.settings || [],\n        title: w.widget.title,\n        appId: w.widget.appID,\n        currentSetting: defaultValues,\n      };\n    });\n    */\n    /*\n    Promise.all(allSettings).then(r => {\n      //console.log(\"GET SETTINGS \", r);\n      r.forEach((d, i) => {\n        //console.log(\"GET SETTINGS 2\", d);\n        let defaultValues = {};\n        if (Object.keys(d).length > 0) {\n          Object.keys(d).forEach(k => {\n            defaultValues[k] = d[k];\n          });\n          widgetConfig[i].currentSetting = defaultValues;\n          widgetSettings.current[i].currentSetting = defaultValues;\n        }\n      });\n      //console.log(\"WIDGET CONFIG \", data);\n      //setWidgetConfig(data);\n    });\n    */\n    /*\n    console.log(\"GET SETTINGS \", d);\n        if (Object.keys(d).length > 0) {\n          Object.keys(d).forEach(k => {\n            defaultValues[k] = d[k];\n          });\n        }\n        data[i].currentSetting = defaultValues;\n\n    console.log(\"WIDGET CONFIG \", data);\n    setWidgetConfig(data);\n    */\n    return () => {\n      // unsubscribe...\n      if (athenaSubscription.current) {\n        console.log(\"UNSUBS ATHENA \");\n        athenaSubscription.current.unsubscribe();\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    console.log(\"WIDGET CONFIG, create widgets... \");\n    if (widgetConfig.length > 0) {\n      console.log(\"CREATE WIDGETS...\");\n      const widgets = widgetConfig.map((w, i) => {\n        console.log(\"WIDGET COMPONENT \", w);\n        //React.forwardRef((props, ref) =>\n\n        const Widget = forwardRef((props, ref) => {\n          console.log(\"W \", props);\n          const size = w.widget.size.split(\"x\");\n          return (\n            <React.Fragment>\n              <div\n                style={{\n                  width: size[0] + \"px\",\n                  height: size[1] + \"px\",\n                  margin: \"10px\",\n                }}\n              >\n                <Flex flexDirection={\"row\"}>\n                  {/* \n                  <C.IconDiv open={props.open} onClick={() => openSettings(i)}>\n                    <BlendIcon iconify={bxCog} />\n                  </C.IconDiv>\n                  */}\n                  <Flex>\n                    {w.settings && (\n                      <C.IconDiv\n                        open={props.open}\n                        onClick={() => openSettings(i)}\n                        widgetTheme={w.widget.theme}\n                      />\n                    )}\n                    {!w.settings && <C.EmptyDiv />}\n                  </Flex>\n                  <Flex>\n                    <C.WidgetWrapper\n                      className={\"prifina-widget\"}\n                      data-widget-index={i}\n                      key={\"widget-wrapper-\" + i}\n                      ref={ref}\n                    >\n                      <RemoteComponent url={w.url} {...props} />\n                    </C.WidgetWrapper>\n                  </Flex>\n                </Flex>\n              </div>\n            </React.Fragment>\n          );\n        });\n\n        //const Widget = (props) => <RemoteComponent url={remoteUrl} {...props} />;\n\n        //return <Widget key={\"prifina-widget-\" + i} test={\"ok\"} />;\n        return Widget;\n      });\n      //refs.current = widgets;\n      // <RemoteComponent url={remoteUrl} fallback={<div>Testing...</div>} />;\n      console.log(\"WIDGETS \", widgets);\n\n      setWidgetList(widgets);\n    }\n  }, [widgetConfig]);\n\n  const onUpdate = data => {\n    console.log(\"Update settings \", data);\n    console.log(\"HOOK \", WidgetHooks);\n    //console.log(getCallbacks());\n    console.log(settings.current, widgetSettings);\n    // deep-copy...\n    const currentSettings = JSON.parse(\n      JSON.stringify(\n        widgetSettings.current[settings.current.widget].currentSettings,\n      ),\n    );\n    //console.log(\"CURRENT SETTINGS COPY\", currentSettings);\n    let systemSettingsUpdated = false;\n\n    let currentWidgetConfig = JSON.parse(JSON.stringify(widgetConfig));\n    Object.keys(data).forEach(k => {\n      let dataField = k;\n      // check system settings... and update widgetConfig\n      if (\n        [\"theme\"].indexOf(dataField) > -1 &&\n        currentSettings[dataField] !== data[dataField]\n      ) {\n        systemSettingsUpdated = true;\n        currentWidgetConfig[settings.current.widget].widget[dataField] =\n          data[dataField];\n      }\n\n      if (\n        [\"sizes\"].indexOf(dataField) > -1 &&\n        currentSettings[\"size\"] !== data[k]\n      ) {\n        dataField = \"size\";\n        systemSettingsUpdated = true;\n        currentWidgetConfig[settings.current.widget].widget[\"size\"] = data[k];\n      }\n\n      // note the dataField is not used with data object...\n      widgetSettings.current[settings.current.widget].currentSettings[\n        dataField\n      ] = data[k];\n    });\n    // update settings...\n    let newSettings = [];\n    Object.keys(currentSettings).forEach(k => {\n      if (k === \"size\" && data.hasOwnProperty(\"sizes\")) {\n        newSettings.push({ field: k, value: data[\"sizes\"] });\n      } else if (data.hasOwnProperty(k)) {\n        newSettings.push({ field: k, value: data[k] });\n      } else {\n        newSettings.push({ field: k, value: currentSettings[k] });\n      }\n    });\n    /*\n    for (let s = 0; s < newSettings.length; s++) {\n      // only keep field+values\n      delete newSettings[s].label;\n      delete newSettings[s].type;\n      console.log(\"NEW SETTING LOOP \", newSettings[s]);\n      if (newSettings[s].field === \"size\" && data.hasOwnProperty(\"sizes\")) {\n        newSettings[s].value = data[\"sizes\"];\n      } else if (data.hasOwnProperty(newSettings[s].field)) {\n        newSettings[s].value = data[newSettings[s].field];\n      }\n    }\n    */\n\n    /*\n    Object.keys(data).forEach(k => {\n      widgetSettings.current[settings.current.widget].currentSetting[k] =\n        data[k];\n      newSettings.push({ field: k, value: data[k] });\n    });\n    */\n\n    const currentAppId = widgetSettings.current[settings.current.widget].appId;\n    //\"f902cbca-8748-437d-a7bb-bd2dc9d25be5\"\n    /*\n    input WidgetSettingInput {\n      field: String!\n      value: String!\n    }\n*/\n    console.log(\"NEW SETTINGS \", newSettings, currentAppId);\n    console.log(\"UPDATED SETTINGS \", widgetSettings.current, currentAppId);\n    // useCallback((appID, uuid, settings = [{}])\n\n    setSettings(currentAppId, prifinaID, {\n      type: \"WIDGET\",\n      index: settings.current.widget,\n      settings: newSettings,\n    });\n    const c = getCallbacks();\n    console.log(\"CALLBACKS \", c);\n    const widgetInstallCount =\n      widgetSettings.current[settings.current.widget].installCount;\n    console.log(\n      \" CALLBACK \",\n      c.hasOwnProperty(currentAppId),\n      widgetInstallCount,\n    );\n    console.log(\" CALLBACK \", typeof c[currentAppId][widgetInstallCount]);\n    if (\n      c.hasOwnProperty(currentAppId) &&\n      typeof c[currentAppId][widgetInstallCount] === \"function\"\n    ) {\n      console.log(\"FOUND CALLBACK \");\n      c[currentAppId][widgetInstallCount]({ settings: data });\n    }\n\n    //setWidgetData([data]);\n    //setOpen(false);\n    //console.log(check());\n    /*\n    console.log(settings, widgetSettings[settings.current.widget]);\n    const currentSettings = widgetSettings[settings.current.widget];\n    console.log(prifina.getCallbacks());\n    const c = prifina.getCallbacks();\n    if (typeof c[currentSettings.appID] === \"function\") {\n      prifina.setSettings(currentSettings.appID, data);\n      c[currentSettings.appID](data);\n      setOpen(false);\n    }\n    */\n    setSprings(index => {\n      return {\n        from: {\n          transform: items[index].transform,\n          opacity: 1,\n          width: \"300px\",\n          height: \"300px\",\n        },\n        config: {\n          mass: 5,\n          tension: 500,\n          friction: 220,\n        },\n      };\n    });\n\n    setOpen(false);\n    setFlipped(false);\n    setFinish(false);\n\n    //widgetConfig...\n    if (systemSettingsUpdated) {\n      console.log(\n        \"SystemSettingsUpdated \",\n        systemSettingsUpdated,\n        currentWidgetConfig,\n      );\n      setWidgetConfig(currentWidgetConfig);\n    }\n  };\n\n  const saveSearchKey = async searchKey => {\n    if (searchKey.length > 0)\n      await appSyncClient.mutate({\n        mutation: gql(addSearchKey),\n        variables: {\n          input: {\n            owner: currentUser.uuid,\n            searchKey: searchKey,\n            role: activeTab === 0 ? \"\" : roleKey[activeTab],\n          },\n        },\n      });\n\n    /*\n      addSearchKeyMutation(GRAPHQL, {\n        owner: currentUser.uuid,\n        searchKey: searchKey,\n        role: activeTab === 0 ? \"\" : roleKey[activeTab],\n      });\n      */\n    /*\ninput SearchKeyInput {\n\towner: String!\n\tsearchKey: String\n\trole: String\n}\n*/\n  };\n  const saveSearchResult = async (searchKey, searchResult) => {\n    if (searchKey.length > 0) {\n      const searchBuckeyKey = \"search-results/\" + short.generate() + \".json\";\n\n      await appSyncClient.mutate({\n        mutation: gql(addSearchResult),\n        variables: {\n          input: {\n            owner: currentUser.uuid,\n            searchKey: searchKey,\n            role: activeTab === 0 ? \"\" : roleKey[activeTab],\n            selectedResult: searchBuckeyKey,\n          },\n        },\n      });\n\n      /*\n      addSearchResultMutation(GRAPHQL, {\n        owner: currentUser.uuid,\n        searchKey: searchKey,\n        role: activeTab === 0 ? \"\" : roleKey[activeTab],\n        selectedResult: searchBuckeyKey,\n      });\n      */\n      await Storage.put(searchBuckeyKey, JSON.stringify(searchResult), {\n        level: \"public\",\n        contentType: \"application/json\",\n\n        metadata: {\n          owner: currentUser.uuid,\n          searchKey: searchKey,\n          created: new Date().toISOString(),\n        },\n      });\n    }\n\n    /*\n\ninput SearchResultInput {\n\towner: String!\n\tsearchKey: String!\n\tselectedResult: AWSJSON\n}\n\n*/\n  };\n  /*\n  useEffect(() => {\n    if (widgetList.length > 0) {\n      const widgets = document.querySelectorAll(\n        \".prifina-widget >*:first-child\",\n      );\n      console.log(widgets);\n      widgets.forEach((w, i) => {\n        console.log(w.getBoundingClientRect());\n      });\n    }\n  }, [widgetList]);\n*/\n  return (\n    <>\n      {open && (\n        <C.ModalBackground\n          className={\"widget-modal\"}\n          onClick={e => {\n            console.log(\"TARGET \", e);\n            console.log(\"WIDGET SETTINGS \", refs.current, settings);\n            console.log(\"MODAL \", e.target.className);\n\n            if (e.target.className.indexOf(\"widget-modal\") > -1) {\n              setOpen(false);\n            }\n          }}\n        >\n          {springs.map((props, i) => {\n            console.log(\"PROPS \", i, props);\n            console.log(\"IMAGE \", imageCache.current);\n            // widget settings...\n            console.log(settings.current);\n            console.log(widgetSettings);\n\n            return (\n              <animated.div\n                style={{\n                  transform: props.transform,\n                  /*opacity: props.opacity, */\n                  left: settings.current.left,\n                  top: settings.current.top,\n\n                  width: props.width,\n                  height: props.height,\n\n                  position: \"absolute\",\n\n                  /*border: i === 0 ? \"2px outset\" : null,*/\n                  borderRadius: i === 0 ? \"8px\" : null,\n                  visibility: open ? \"visible\" : \"hidden\",\n                  /*\n                  visible: props.transform.interpolate(\n                    [0, 150],\n                    [\"visible\", \"hidden\"],\n                  ),\n                  */\n                  zIndex: 50,\n                  backgroundSize: \"cover\",\n                  /*backgroundColor: flipped ? \"white\" : null,*/\n                  backgroundImage:\n                    i > 0\n                      ? null\n                      : flipped\n                      ? null\n                      : `url(${imageCache.current[settings.current.widget]})`,\n                }}\n                ref={ref => {\n                  if (ref !== null) settingsRef.current.push(ref);\n                }}\n                key={\"animated-\" + i}\n              >\n                {finish && i === 1 && (\n                  <C.SettingsDiv>\n                    <C.SettingsDialog\n                      spring={i}\n                      flipped={flipped}\n                      open={open}\n                      onUpdate={onUpdate}\n                      widgetIndex={settings.current.widget}\n                      widgetSettings={\n                        widgetSettings.current[settings.current.widget]\n                      }\n                    />\n                  </C.SettingsDiv>\n                )}\n              </animated.div>\n            );\n          })}\n        </C.ModalBackground>\n      )}\n\n      <PrifinaLogo title={\"Display App\"} />\n      <C.PageContainer>\n        <div style={{ overflow: \"hidden\" }}>\n          <Tabs\n            activeTab={activeTab}\n            onClick={tabClick}\n            style={{ height: \"100%\" }}\n            variant={\"line\"}\n          >\n            <TabList>\n              <Tab>\n                <C.TabText>{currentUser.name}</C.TabText>\n              </Tab>\n              <Tab>\n                <C.TabText>Work</C.TabText>\n              </Tab>\n              <Tab>\n                <C.TabText>Family</C.TabText>\n              </Tab>\n              <Tab>\n                <C.TabText>Hobbies</C.TabText>\n              </Tab>\n            </TabList>\n            <TabPanelList style={{ backgroundColor: null }}>\n              <TabPanel\n                style={{\n                  height: \"100vh\",\n                  paddingBottom: \"50px\",\n                  overflow: \"auto\",\n                }}\n              >\n                {/* \n              <div style={{ overflow: \"hidden\" }}>\n                <C.SearchBox\n                  ref={searchBox}\n                  showHistory={setSearchHistory}\n                  chevronOpen={searchHistory}\n                  searchKey={setSearchKey}\n                  searchOpen={searchKey.length > 0}\n                  saveSearchKey={saveSearchKey}\n                />\n                {searchKey.length > 0 && !searchHistory && (\n                  <C.SearchResults\n                    searchBox={searchBox}\n                    searchKey={searchKey}\n                    roleKey={roleKeys[activeTab]}\n                    saveSearchResult={saveSearchResult}\n                  />\n                )}\n                {searchHistory && <C.SearchHistory searchBox={searchBox} />}\n              </div>\n*/}\n                <div style={{ overflow: \"auto\" }}>\n                  <C.WidgetContainer className={\"prifina-widget-container\"}>\n                    {widgetList.length > 0 && (\n                      <C.WidgetList\n                        widgetList={widgetList}\n                        widgetData={widgetConfig}\n                        currentUser={currentUser}\n                        dataSources={dataSources}\n                      />\n                    )}\n                  </C.WidgetContainer>\n                </div>\n              </TabPanel>\n              <TabPanel>Work panel</TabPanel>\n              <TabPanel>Family panel</TabPanel>\n              <TabPanel>Hobbies panel</TabPanel>\n            </TabPanelList>\n          </Tabs>\n        </div>\n      </C.PageContainer>\n    </>\n  );\n};\n\nDisplayApp.propTypes = {\n  widgetConfigData: PropTypes.array.isRequired,\n  appSyncClient: PropTypes.object.isRequired,\n  prifinaID: PropTypes.string.isRequired,\n  open: PropTypes.bool,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  visibility: PropTypes.string,\n  transform: PropTypes.string,\n};\nexport default DisplayApp;\n"],"sourceRoot":""}